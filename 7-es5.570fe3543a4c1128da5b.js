!function(){function t(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}function e(t,i){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,i)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,r=s(t);if(e){var o=s(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return n(this,i)}}function n(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{MrBB:function(e,n,s){"use strict";s.r(n),s.d(n,"CoulombModule",function(){return I});var o,c,h,u,l,d=s("ofXK"),f=s("5RNC"),v=s("tyNb"),p=s("wpM9"),g=s("fXoL"),w=s("NCWt"),m=s.n(w),y=s("WJRs"),b=["width","","height",""],R=((o=function(){function t(e){r(this,t),this.elRef=e}return a(t,[{key:"ngAfterViewInit",value:function(){var t=this;new m.a(function(e){e.setup=function(){var i,n;e.cursor(e.CROSS);var s=e.createCanvas(t.width,t.height,!0===t.webGL?e.WEBGL:e.P2D);s.parent(t.elRef.nativeElement),null===(n=(i=t.canvasImpl).setup)||void 0===n||n.call(i,e,s)},e.windowResized=function(){var i,n;e.resizeCanvas(t.width,t.height),null===(n=(i=t.canvasImpl).windowResized)||void 0===n||n.call(i,e)},e.draw=function(){var i,n;e.clear(),e.fill(255,0),null===(n=(i=t.canvasImpl).draw)||void 0===n||n.call(i,e)},e.mousePressed=function(i){var n,s;return null===(s=(n=t.canvasImpl).mousePressed)||void 0===s?void 0:s.call(n,e,i)},e.mouseDragged=function(i){var n,s;return null===(s=(n=t.canvasImpl).mouseDragged)||void 0===s?void 0:s.call(n,e,i)},e.mouseReleased=function(i){var n,s;return null===(s=(n=t.canvasImpl).mouseReleased)||void 0===s?void 0:s.call(n,e,i)},e.touchStarted=function(i){var n,s;return null===(s=(n=t.canvasImpl).touchStarted)||void 0===s?void 0:s.call(n,e,i)},e.touchMoved=function(i){var n,s;return null===(s=(n=t.canvasImpl).touchMoved)||void 0===s?void 0:s.call(n,e,i)},e.touchEnded=function(i){var n,s;return null===(s=(n=t.canvasImpl).touchEnded)||void 0===s?void 0:s.call(n,e,i)}})}}]),t}()).\u0275fac=function(t){return new(t||o)(g.Mb(g.l))},o.\u0275cmp=g.Gb({type:o,selectors:[["ceich-canvas","width","","height",""]],contentQueries:function(t,e,i){var n;1&t&&g.Fb(i,y.a,1),2&t&&g.fc(n=g.Zb())&&(e.canvasImpl=n.first)},inputs:{width:"width",height:"height",webGL:"webGL"},attrs:b,decls:0,vars:0,template:function(t,e){},encapsulation:2}),o),k=function(){function t(e,i,n,s){r(this,t),this.x=e,this.y=i,this.z=n,this.w=s}return a(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"length",get:function(){return Math.sqrt(this.sqrLength)}},{key:"sqrLength",get:function(){var t=this.x*this.x+this.y*this.y;return this.z&&(t+=this.z*this.z),this.w&&(t+=this.w*this.w),t}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z?this.z+=t.z:this.z=t.z,this.w?this.w+=t.w:this.w=t.w,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z?this.z-=t.z:this.z=-t.z,this.w?this.w-=t.w:this.w=-t.w,this}},{key:"mul",value:function(t){return"number"==typeof t&&(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}}],[{key:"ZERO",get:function(){return new t(0,0)}}]),t}(),C=function(e){t(s,e);var n=i(s);function s(){return r(this,s),n.apply(this,arguments)}return a(s,[{key:"draw",value:function(t,e){!1!==e&&this.tick(t),t.point(this.position.x,this.position.y,this.position.z)}}]),s}(function(){function t(e,i){r(this,t),this.position=e,this.velocity=i||new k(0,0)}return a(t,[{key:"tick",value:function(t){var e=t.deltaTime/1e3;this.drag&&this.velocity.mul(1-this.drag*e),this.position.add(this.velocity.clone().mul(e))}},{key:"move",value:function(t){this.position.add(t)}},{key:"push",value:function(t){this.velocity.add(t)}}]),t}()),x=s("GwW/"),z=["charge",""],M=((c=function(e){t(s,e);var n=i(s);function s(t){var e;return r(this,s),(e=n.call(this)).color=t,e.k0=1e4,e.mainBorder=2,e.mainMinRadius=12,e.mainMaxRadius=35,e.sideMinRadius=1,e.sideMaxRadius=8,e.spawnRatio=15,e.chargeVariation=10,e.particles=[],e.dragging=!1,e}return a(s,[{key:"setup",value:function(t,e){this.render=e,this.updateSize(),this.mainCharge=new C(new k(this.w/2,this.h/2))}},{key:"updateSize",value:function(){var t=this.render.elt.getBoundingClientRect();this.w=t.width,this.h=t.height,this.offsetX=t.left,this.offsetY=t.top}},{key:"draw",value:function(t){this.w===t.width&&this.h===t.height||this.updateSize(),this.spawnParticles(t),this.applyElectricForces(t),this.despawnParticles(t),this.drawSideParticles(t),this.drawMainParticle(t)}},{key:"mousePressed",value:function(t,e){e.x<this.offsetX||e.x>this.w+this.offsetX||e.y<this.offsetY||e.y>this.h+this.offsetY||(this.dragging=!0)}},{key:"touchStarted",value:function(t,e){var i,n=null===(i=e.touches)||void 0===i?void 0:i[0];n&&(this.lastTouch=new k(n.clientX,n.clientY),n.clientX<this.offsetX||n.clientX>this.w+this.offsetX||n.clientY<this.offsetY||n.clientY>this.h+this.offsetY||(this.dragging=!0))}},{key:"mouseDragged",value:function(t,e){this.dragging&&this.mainCharge.move(new k(e.movementX,e.movementY))}},{key:"touchMoved",value:function(t,e){var i;if(this.dragging){var n=null===(i=e.touches)||void 0===i?void 0:i[0],s=new k(n.clientX,n.clientY);if(!n)return;this.mainCharge.move(s.clone().sub(this.lastTouch)),this.lastTouch=s}}},{key:"mouseReleased",value:function(){this.dragging=!1}},{key:"touchEnded",value:function(t,e){this.dragging=!1,this.lastTouch=void 0}},{key:"drawMainParticle",value:function(t){t.stroke(this.color.black),this.mainRadius=this.mainMinRadius+(this.mainMaxRadius-this.mainMinRadius)*t.abs(this.charge)/20,t.strokeWeight(this.mainRadius+this.mainBorder);var e=(this.mainRadius+this.mainBorder)/2,i=this.mainCharge.position;i.x<+e?i.x=+e:i.x>this.w-e&&(i.x=this.w-e),i.y<+e?i.y=+e:i.y>this.h-e&&(i.y=this.h-e),this.mainCharge.draw(t),t.stroke(this.chargeColor(this.charge)),t.strokeWeight(this.mainRadius),this.mainCharge.draw(t,!1)}},{key:"spawnParticles",value:function(t){for(var e=this.spawnRatio*t.deltaTime/1e3,i=t.ceil(e),n=e/i;i-- >0;)if(t.random()<n){var s=new C(new k(t.random(0,t.width),t.random(0,t.height)));s.charge=t.random(-this.chargeVariation,this.chargeVariation),this.particles.push(s)}}},{key:"applyElectricForces",value:function(t){var e=this,i=this.mainCharge.position;this.particles.forEach(function(n){if(n.charge){var s=n.position.clone().sub(i),r=t.max(10,s.length);n.push(s.mul(e.k0*e.charge*n.charge/(r*r*r)*t.deltaTime/1e3))}})}},{key:"drawSideParticles",value:function(t){var e=this,i=this.sideMinRadius,n=(this.sideMaxRadius-this.sideMinRadius)/this.chargeVariation;this.particles.forEach(function(s){t.strokeWeight(i+t.round(t.abs(s.charge)*n)),t.stroke(e.chargeColor(s.charge)),s.draw(t)})}},{key:"despawnParticles",value:function(t){var e=this,i=this.sideMaxRadius/2,n=this.mainRadius+this.mainBorder+i^2,s=this.mainCharge.position;this.particles.forEach(function(r,o){(r.position.x<-i||r.position.y<-i||r.position.x>t.width+i||r.position.y>t.height+i||s.clone().sub(r.position).sqrLength<=n)&&e.particles.splice(o,1)})}},{key:"chargeColor",value:function(t){return t>0?this.color.red:t<0?this.color.blue:this.color.purple}}]),s}(p.b)).\u0275fac=function(t){return new(t||c)(g.Mb(x.a))},c.\u0275cmp=g.Gb({type:c,selectors:[["ceich-coulomb-interactive-canvas1","charge",""]],inputs:{charge:"charge"},features:[g.Bb([{provide:p.b,useExisting:Object(g.U)(function(){return c})}]),g.zb],attrs:z,decls:0,vars:0,template:function(t,e){},encapsulation:2}),c),E=["ruler"],B=((h=function(){function t(e){r(this,t),this.cdRef=e,this.width=600,this.height=550,this.chargeValue=10,this.color="red"}return a(t,[{key:"ngAfterViewInit",value:function(){this.width=this.ruler.nativeElement.getBoundingClientRect().width,this.height=document.getElementById("mainContainer").getBoundingClientRect().height-78-64,this.cdRef.detectChanges()}},{key:"onResize",value:function(){this.width=this.ruler.nativeElement.getBoundingClientRect().width,this.height=document.getElementById("mainContainer").getBoundingClientRect().height-78-64}},{key:"onChangeCharge",value:function(t){this.chargeValue=t.value,this.color=t.value>0?"red":t.value<0?"blue":"purple"}}]),t}()).\u0275fac=function(t){return new(t||h)(g.Mb(g.h))},h.\u0275cmp=g.Gb({type:h,selectors:[["ceich-coulomb-interactive"]],viewQuery:function(t,e){var i;1&t&&g.tc(E,1),2&t&&g.fc(i=g.Zb())&&(e.ruler=i.first)},hostBindings:function(t,e){1&t&&g.Yb("resize",function(){return e.onResize()},!1,g.hc)},decls:6,vars:5,consts:[[1,"mx-auto","fich-container","wide","py-0"],["ruler",""],[3,"width","height"],[3,"charge"],["thumbLabel","","min","-20","max","20","step","1",3,"value","color","input"]],template:function(t,e){1&t&&(g.Rb(0,"div",0),g.Nb(1,"span",null,1),g.Rb(3,"ceich-canvas",2),g.Nb(4,"ceich-coulomb-interactive-canvas1",3),g.Qb(),g.Rb(5,"mat-slider",4),g.Yb("input",function(t){return e.onChangeCharge(t)}),g.Qb(),g.Qb()),2&t&&(g.Cb(3),g.dc("width",e.width)("height",e.height),g.Cb(1),g.dc("charge",e.chargeValue),g.Cb(1),g.dc("value",e.chargeValue)("color",e.color))},directives:[R,M,f.a],encapsulation:2}),h),P=[{path:"",component:(u=function t(){r(this,t)},u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=g.Gb({type:u,selectors:[["ceich-coulomb"]],decls:1,vars:0,template:function(t,e){1&t&&g.Nb(0,"ceich-coulomb-interactive")},directives:[B],encapsulation:2}),u)}],I=((l=function t(){r(this,t)}).\u0275fac=function(t){return new(t||l)},l.\u0275mod=g.Kb({type:l}),l.\u0275inj=g.Jb({providers:[],imports:[[d.b,v.b.forChild(P),p.c,f.b]]}),l)}}])}();