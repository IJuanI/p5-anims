!function(){function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,e)}function e(t){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(i){var a=s(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return n(this,e)}}function n(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{MrBB:function(i,n,s){"use strict";s.r(n),s.d(n,"CoulombModule",function(){return O});var a,h,c,u,l,f=s("ofXK"),d=s("5RNC"),p=s("tyNb"),g=s("wpM9"),v=s("fXoL"),w=s("NCWt"),m=s.n(w),y=s("WJRs"),b=["width","","height",""],R=((a=function(){function t(i){r(this,t),this.elRef=i}return o(t,[{key:"ngAfterViewInit",value:function(){var t=this;new m.a(function(i){i.setup=function(){var e,n;i.cursor(i.CROSS);var s=i.createCanvas(t.width,t.height,!0===t.webGL?i.WEBGL:i.P2D);s.parent(t.elRef.nativeElement),null===(n=(e=t.canvasImpl).setup)||void 0===n||n.call(e,i,s)},i.windowResized=function(){var e,n;i.resizeCanvas(t.width,t.height),null===(n=(e=t.canvasImpl).windowResized)||void 0===n||n.call(e,i)},i.draw=function(){var e,n;i.clear(),i.fill(255,0),null===(n=(e=t.canvasImpl).draw)||void 0===n||n.call(e,i)},i.mouseDragged=function(e){var n,s;null===(s=(n=t.canvasImpl).mouseDragged)||void 0===s||s.call(n,i,e)},i.mouseReleased=function(e){var n,s;null===(s=(n=t.canvasImpl).mouseReleased)||void 0===s||s.call(n,i,e)}})}}]),t}()).\u0275fac=function(t){return new(t||a)(v.Mb(v.l))},a.\u0275cmp=v.Gb({type:a,selectors:[["ceich-canvas","width","","height",""]],contentQueries:function(t,i,e){var n;1&t&&v.Fb(e,y.a,1),2&t&&v.fc(n=v.Zb())&&(i.canvasImpl=n.first)},inputs:{width:"width",height:"height",webGL:"webGL"},attrs:b,decls:0,vars:0,template:function(t,i){},encapsulation:2}),a),k=function(){function t(i,e,n,s){r(this,t),this.x=i,this.y=e,this.z=n,this.w=s}return o(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"length",get:function(){return Math.sqrt(this.sqrLength)}},{key:"sqrLength",get:function(){var t=this.x*this.x+this.y*this.y;return this.z&&(t+=this.z*this.z),this.w&&(t+=this.w*this.w),t}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z?this.z+=t.z:this.z=t.z,this.w?this.w+=t.w:this.w=t.w,this}},{key:"diff",value:function(t){return this.x-=t.x,this.y-=t.y,this.z?this.z-=t.z:this.z=-t.z,this.w?this.w-=t.w:this.w=-t.w,this}},{key:"mul",value:function(t){return"number"==typeof t&&(this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}}],[{key:"ZERO",get:function(){return new t(0,0)}}]),t}(),C=function(i){t(s,i);var n=e(s);function s(){return r(this,s),n.apply(this,arguments)}return o(s,[{key:"draw",value:function(t,i){!1!==i&&this.tick(t),t.point(this.position.x,this.position.y,this.position.z)}}]),s}(function(){function t(i,e){r(this,t),this.position=i,this.velocity=e||new k(0,0)}return o(t,[{key:"tick",value:function(t){var i=t.deltaTime/1e3;this.drag&&this.velocity.mul(1-this.drag*i),this.position.add(this.velocity.clone().mul(i))}},{key:"move",value:function(t){this.position.add(t)}},{key:"push",value:function(t){this.velocity.add(t)}}]),t}()),x=s("GwW/"),z=["charge",""],M=((h=function(i){t(s,i);var n=e(s);function s(t){var i;return r(this,s),(i=n.call(this)).color=t,i.k0=1e4,i.mainBorder=2,i.mainMinRadius=12,i.mainMaxRadius=35,i.sideMinRadius=1,i.sideMaxRadius=8,i.spawnRatio=15,i.chargeVariation=10,i.particles=[],i.dragging=!1,i.clicking=!1,i}return o(s,[{key:"setup",value:function(t,i){this.render=i,this.updateSize(),this.mainCharge=new C(new k(this.w/2,this.h/2))}},{key:"updateSize",value:function(){var t=this.render.elt.getBoundingClientRect();this.w=t.width,this.h=t.height,this.offsetX=t.left,this.offsetY=t.top}},{key:"draw",value:function(t){this.w===t.width&&this.h===t.height||this.updateSize(),this.spawnParticles(t),this.applyElectricForces(t),this.despawnParticles(t),this.drawSideParticles(t),this.drawMainParticle(t)}},{key:"mouseDragged",value:function(t,i){t.mouseIsPressed||(this.dragging=!1),i.x<this.offsetX||i.x>this.w+this.offsetX||i.y<this.offsetY||i.y>this.h+this.offsetY||!this.clicking&&t.mouseIsPressed&&(this.dragging=!0),this.dragging&&this.mainCharge.move(new k(i.movementX,i.movementY)),this.clicking=t.mouseIsPressed}},{key:"mouseReleased",value:function(){this.dragging=!1,this.clicking=!1}},{key:"drawMainParticle",value:function(t){t.stroke(this.color.black),this.mainRadius=this.mainMinRadius+(this.mainMaxRadius-this.mainMinRadius)*t.abs(this.charge)/20,t.strokeWeight(this.mainRadius+this.mainBorder);var i=(this.mainRadius+this.mainBorder)/2,e=this.mainCharge.position;e.x<+i?e.x=+i:e.x>this.w-i&&(e.x=this.w-i),e.y<+i?e.y=+i:e.y>this.h-i&&(e.y=this.h-i),this.mainCharge.draw(t),t.stroke(this.chargeColor(this.charge)),t.strokeWeight(this.mainRadius),this.mainCharge.draw(t,!1)}},{key:"spawnParticles",value:function(t){for(var i=this.spawnRatio*t.deltaTime/1e3,e=t.ceil(i),n=i/e;e-- >0;)if(t.random()<n){var s=new C(new k(t.random(0,t.width),t.random(0,t.height)));s.charge=t.random(-this.chargeVariation,this.chargeVariation),this.particles.push(s)}}},{key:"applyElectricForces",value:function(t){var i=this,e=this.mainCharge.position;this.particles.forEach(function(n){if(n.charge){var s=n.position.clone().diff(e),r=t.max(10,s.length);n.push(s.mul(i.k0*i.charge*n.charge/(r*r*r)*t.deltaTime/1e3))}})}},{key:"drawSideParticles",value:function(t){var i=this,e=this.sideMinRadius,n=(this.sideMaxRadius-this.sideMinRadius)/this.chargeVariation;this.particles.forEach(function(s){t.strokeWeight(e+t.round(t.abs(s.charge)*n)),t.stroke(i.chargeColor(s.charge)),s.draw(t)})}},{key:"despawnParticles",value:function(t){var i=this,e=this.sideMaxRadius/2,n=this.mainRadius+this.mainBorder+e^2,s=this.mainCharge.position;this.particles.forEach(function(r,a){(r.position.x<-e||r.position.y<-e||r.position.x>t.width+e||r.position.y>t.height+e||s.clone().diff(r.position).sqrLength<=n)&&i.particles.splice(a,1)})}},{key:"chargeColor",value:function(t){return t>0?this.color.red:t<0?this.color.blue:this.color.purple}}]),s}(g.b)).\u0275fac=function(t){return new(t||h)(v.Mb(x.a))},h.\u0275cmp=v.Gb({type:h,selectors:[["ceich-coulomb-interactive-canvas1","charge",""]],inputs:{charge:"charge"},features:[v.Bb([{provide:g.b,useExisting:Object(v.U)(function(){return h})}]),v.zb],attrs:z,decls:0,vars:0,template:function(t,i){},encapsulation:2}),h),B=["ruler"],P=((c=function(){function t(i){r(this,t),this.cdRef=i,this.width=600,this.height=550,this.chargeValue=10,this.color="red"}return o(t,[{key:"ngAfterViewInit",value:function(){this.width=this.ruler.nativeElement.getBoundingClientRect().width,this.height=document.getElementById("mainContainer").getBoundingClientRect().height-78-64,this.cdRef.detectChanges()}},{key:"onResize",value:function(){this.width=this.ruler.nativeElement.getBoundingClientRect().width,this.height=document.getElementById("mainContainer").getBoundingClientRect().height-78-64}},{key:"onChangeCharge",value:function(t){this.chargeValue=t.value,this.color=t.value>0?"red":t.value<0?"blue":"purple"}}]),t}()).\u0275fac=function(t){return new(t||c)(v.Mb(v.h))},c.\u0275cmp=v.Gb({type:c,selectors:[["ceich-coulomb-interactive"]],viewQuery:function(t,i){var e;1&t&&v.tc(B,1),2&t&&v.fc(e=v.Zb())&&(i.ruler=e.first)},hostBindings:function(t,i){1&t&&v.Yb("resize",function(){return i.onResize()},!1,v.hc)},decls:6,vars:5,consts:[[1,"mx-auto","fich-container","wide","py-0"],["ruler",""],[3,"width","height"],[3,"charge"],["thumbLabel","","min","-20","max","20","step","1",3,"value","color","input"]],template:function(t,i){1&t&&(v.Rb(0,"div",0),v.Nb(1,"span",null,1),v.Rb(3,"ceich-canvas",2),v.Nb(4,"ceich-coulomb-interactive-canvas1",3),v.Qb(),v.Rb(5,"mat-slider",4),v.Yb("input",function(t){return i.onChangeCharge(t)}),v.Qb(),v.Qb()),2&t&&(v.Cb(3),v.dc("width",i.width)("height",i.height),v.Cb(1),v.dc("charge",i.chargeValue),v.Cb(1),v.dc("value",i.chargeValue)("color",i.color))},directives:[R,M,d.a],encapsulation:2}),c),E=[{path:"",component:(u=function t(){r(this,t)},u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=v.Gb({type:u,selectors:[["ceich-coulomb"]],decls:1,vars:0,template:function(t,i){1&t&&v.Nb(0,"ceich-coulomb-interactive")},directives:[P],encapsulation:2}),u)}],O=((l=function t(){r(this,t)}).\u0275fac=function(t){return new(t||l)},l.\u0275mod=v.Kb({type:l}),l.\u0275inj=v.Jb({providers:[],imports:[[f.b,p.b.forChild(E),g.c,d.b]]}),l)}}])}();